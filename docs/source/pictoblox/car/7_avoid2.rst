.. note::

    こんにちは、SunFounderのRaspberry Pi & Arduino & ESP32愛好家コミュニティへようこそ！Facebook上でRaspberry Pi、Arduino、ESP32についてもっと深く掘り下げ、他の愛好家と交流しましょう。

    **参加する理由は？**

    - **エキスパートサポート**：コミュニティやチームの助けを借りて、販売後の問題や技術的な課題を解決します。
    - **学び＆共有**：ヒントやチュートリアルを交換してスキルを向上させましょう。
    - **独占的なプレビュー**：新製品の発表や先行プレビューに早期アクセスしましょう。
    - **特別割引**：最新製品の独占割引をお楽しみください。
    - **祭りのプロモーションとギフト**：ギフトや祝日のプロモーションに参加しましょう。

    👉 私たちと一緒に探索し、創造する準備はできていますか？[|link_sf_facebook|]をクリックして今すぐ参加しましょう！

3.7 障害物回避 2
==================================

:ref:`sh_avoid1` プロジェクトでは、2つのIR障害物回避モジュールのみが障害物回避のために使用されていましたが、IR障害物回避モジュールの検出距離は短く、車が障害物を避けるのが遅すぎることがあります。

このプロジェクトでは、遠距離検出のために超音波モジュールも追加します。これにより、車はより遠くの障害物を感知して判断を下すことができます。

必要な部品
---------------------

このプロジェクトには、以下の部品が必要です。

キット全体を購入すると確実に便利です。こちらがリンクです：

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - 名前
        - このキットのアイテム
        - リンク
    *   - 3 in 1 Starter Kit
        - 380+
        - |link_3IN1_kit|

以下のリンクから個別に購入することもできます。

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - コンポーネントの紹介
        - 購入リンク

    *   - :ref:`cpn_uno`
        - |link_Uno_R3_buy|
    *   - :ref:`cpn_l9110` 
        - \-
    *   - :ref:`cpn_tt_motor`
        - \-
    *   - :ref:`cpn_ultrasonic`
        - |link_ultrasonic_buy|
    *   - :ref:`cpn_avoid` 
        - |link_obstacle_avoidance_buy|

回路の作成
-----------------------

超音波モジュールと2つのIR障害物回避モジュールを同時に接続します。

超音波をR3ボードに次のように接続します。

.. list-table:: 

    * - 超音波モジュール
      - R3 ボード
    * - Vcc
      - 5V
    * - Trig
      - 3
    * - Echo
      - 4
    * - Gnd
      - GND

2つのIR障害物回避モジュールのR3ボードへの配線は次のとおりです。

.. list-table:: 

    * - 左 IR モジュール
      - R3 ボード
    * - OUT
      - 8
    * - GND
      - GND
    * - VCC
      - 5V

.. list-table:: 

    * - 右 IR モジュール
      - R3 ボード
    * - OUT
      - 7
    * - GND
      - GND
    * - VCC
      - 5V

.. image:: img/car_7_8.png
    :width: 800

プログラミング
---------------

**1. 関数を作成する**

車を前後に動かします。

.. image:: img/7_avoid2_1.png

車を左後ろおよび右後ろに動かします。

.. image:: img/7_avoid2_2.png

車を停止させます。

.. image:: img/7_avoid2_3.png

**2. 緊急障害物回避**

車の2つの赤外線障害物回避モジュールは、緊急障害物回避のために使用され、短距離、角度、または比較的小さな障害物での障害物を検出します。

* 左の赤外線モジュールが障害物を検出すると、車は左に後退します。
* 右のIRモジュールが障害物を検出すると、車は右後ろに後退します。
* 2つのモジュールが同時に障害物を検出すると、車は直接後ろに後退します。

.. image:: img/7_avoid2_4.png

**3. 長距離障害物回避**

超音波モジュールの値を読み取り、検出された値が10未満の場合、車は後退します。それ以外の場合は前進を続けます。

.. image:: img/7_avoid2_5.png