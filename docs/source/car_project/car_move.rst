.. _car_move:

1. 移動
===============

.. image:: ../components/img/l9110_module.jpg
    :width: 500
    :align: center

プログラムを開始する前に、L9110モジュールの動作原理を確認しましょう。

以下はモーターBの真理表です：

.. list-table:: 
    :widths: 25 25 50
    :header-rows: 1

    * - B-1A
      - B-1B(B-2A)
      - モーターBの状態
    * - 1
      - 0
      - 時計回りに回転
    * - 0
      - 1
      - 反時計回りに回転
    * - 0
      - 0
      - ブレーキ
    * - 1
      - 1
      - 停止

以下はモーターAの真理表です：

.. list-table:: 
    :widths: 25 25 50
    :header-rows: 1

    * - A-1A
      - A-1B
      - モーターAの状態
    * - 1
      - 0
      - 時計回りに回転
    * - 0
      - 1
      - 反時計回りに回転
    * - 0
      - 0
      - ブレーキ
    * - 1
      - 1
      - 停止

* :ref:`cpn_l9110`

**前進**

車を動かすために、L9110モジュールの入力をそれぞれ12VとGNDに直接接続してみましょう。

1. R4ボード、L9110モジュール、そして2つのモーターを接続します。

.. image:: img/car_1.png
    :width: 800

2. B-1B(B-2A)とA-1AをVCCに、B-1AとA-1BをGNDに接続すると、車が前進するのが見えるはずです。

.. image:: img/1.move_4.png 
    :align: center

両方が前進しない場合や以下の状況が発生した場合は、2つのモーターの配線を再調整する必要があります。

* 両方のモーターが同時に後退する場合（左のモーターが時計回りに、右のモーターが反時計回りに回転）、左と右のモーターの配線を同時に入れ替え、OA(A)とOB(A)、OA(B)とOB(B)を交換します。
* 左のモーターが後退（時計回りの回転）の場合、左のモーターのOA(B)とOB(B)の配線を交換します。
* 右のモーターが後退（反時計回りの回転）の場合、右のモーターのOA(A)とOB(A)の配線を交換します。

**後退**

B-1B(B-2A)とA-1AをGNDに、B-1AとA-1BをVCCに接続すると、車が後退するのが見えるはずです。

.. image:: img/1.move_back.png 
    :width: 800

**左折**

車を左に曲げたい場合、つまり両方のモーターを時計回りに回転させたい場合は、B-1AとA-1AをGNDに、B-1B(B-2A)とA-1BをVCCに接続します。

.. image:: img/1.move_left.png 
    :width: 800

**右折**

逆に、車を右に曲げたい場合、つまり両方のモーターを反時計回りに回転させたい場合は、B-1AとA-1AをVCCに、B-1B(B-2A)とA-1BをGNDに接続します。

.. image:: img/1.move_right.png 
    :width: 800

**停止**

モーターを停止するには、同じ側の入力を同時に12VまたはGNDに接続します。例：B-1AとB-1B(B-2A)を同時に12Vまたは5Vに接続、同様にA-1AとA-1Bも接続します。

もちろんこれは理論的なことであり、後でコードで制御する際に必要になります。ここでは車への電源を切ることで停止できます。
